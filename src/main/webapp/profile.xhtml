<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <head>
        <title>Profile | Online CV</title>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="css/style.css"/>
        <script src="js/profile.js" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
    </head>
    <body>
        <f:metadata>
            <f:viewParam name="id" value="#{profileBean.userId}" />
            <f:viewAction action="#{profileBean.onload}" />
        </f:metadata>

        <ui:include src="/WEB-INF/include/header.xhtml"/>

        <div id="user-infos">
            #{profileBean.user.firstName} 
            #{profileBean.user.lastName} 
            #{profileBean.user.email}
        </div>

        <c:if test="#{profileBean.canSeeSection('Experience')}">
            <h2>Work Experience</h2>
            <c:if test="#{profileBean.isOwnProfile()}">
                <button value="+" name="+" onclick="switchVisibility(addWork)" />
            </c:if>

            <c:if test="#{profileBean.isOwnProfile()}">
                <div id="add-work" hidden="true">
                    <h:form>
                        <h:inputText pt:placeholder="Title" required="true" requiredMessage="Enter a title" />
                        <h:inputText pt:placeholder="Company" required="true" requiredMessage="Enter a valid company name" />
                        <h:inputText pt:placeholder="Location" />
                        <h:selectOneMenu>
                            <f:selectItem itemValue="1" itemLabel="January" />
                            <f:selectItem itemValue="2" itemLabel="February" />
                            <f:selectItem itemValue="3" itemLabel="March" />
                            <f:selectItem itemValue="4" itemLabel="April" />
                            <f:selectItem itemValue="5" itemLabel="May" />
                            <f:selectItem itemValue="6" itemLabel="June" />
                            <f:selectItem itemValue="7" itemLabel="July" />
                            <f:selectItem itemValue="8" itemLabel="August" />
                            <f:selectItem itemValue="9" itemLabel="September" />
                            <f:selectItem itemValue="10" itemLabel="October" />
                            <f:selectItem itemValue="11" itemLabel="November" />
                            <f:selectItem itemValue="12" itemLabel="December" />
                        </h:selectOneMenu>
                        <h:inputText pt:placeholder="Year" />
                        - 
                        <h:selectOneMenu>
                            <f:selectItem itemValue="1" itemLabel="January" />
                            <f:selectItem itemValue="2" itemLabel="February" />
                            <f:selectItem itemValue="3" itemLabel="March" />
                            <f:selectItem itemValue="4" itemLabel="April" />
                            <f:selectItem itemValue="5" itemLabel="May" />
                            <f:selectItem itemValue="6" itemLabel="June" />
                            <f:selectItem itemValue="7" itemLabel="July" />
                            <f:selectItem itemValue="8" itemLabel="August" />
                            <f:selectItem itemValue="9" itemLabel="September" />
                            <f:selectItem itemValue="10" itemLabel="October" />
                            <f:selectItem itemValue="11" itemLabel="November" />
                            <f:selectItem itemValue="12" itemLabel="December" />
                        </h:selectOneMenu>
                        <h:inputText pt:placeholder="Year" />
                        <h:inputTextarea pt:placeholder="Description" />
                    </h:form>
                </div>
            </c:if>
        </c:if>

        <c:if test="#{profileBean.canSeeSection('Education')}">
            <h2>Education</h2>
            <c:if test="#{profileBean.isOwnProfile()}">
                <button value="+" name="+" onclick="switchVisibility(addEducation)" />
            </c:if>

            <c:if test="#{profileBean.isOwnProfile()}">
                <div id="add-education" hidden="true">
                    <h:form>
                        <p>
                            <h:inputText value="#{educationManagedBean.title}" pt:placeholder="Title" required="true" requiredMessage="Enter a title" />
                            <h:inputText value="#{educationManagedBean.school}" pt:placeholder="School" required="true" requiredMessage="Enter a valid school name" />
                            <h:inputText value="#{educationManagedBean.location}" pt:placeholder="Location" />
                            <h:selectOneMenu value="#{educationManagedBean.startMonth}">
                                <f:selectItem itemLabel="Month" />
                                <f:selectItem itemValue="1" itemLabel="January" />
                                <f:selectItem itemValue="2" itemLabel="February" />
                                <f:selectItem itemValue="3" itemLabel="March" />
                                <f:selectItem itemValue="4" itemLabel="April" />
                                <f:selectItem itemValue="5" itemLabel="May" />
                                <f:selectItem itemValue="6" itemLabel="June" />
                                <f:selectItem itemValue="7" itemLabel="July" />
                                <f:selectItem itemValue="8" itemLabel="August" />
                                <f:selectItem itemValue="9" itemLabel="September" />
                                <f:selectItem itemValue="10" itemLabel="October" />
                                <f:selectItem itemValue="11" itemLabel="November" />
                                <f:selectItem itemValue="12" itemLabel="December" />
                            </h:selectOneMenu>
                            <h:inputText value="#{educationManagedBean.startYear}" pt:placeholder="Year" />
                            - 
                            <h:selectOneMenu value="#{educationManagedBean.endMonth}" >
                                <f:selectItem itemLabel="Month" />
                                <f:selectItem itemValue="1" itemLabel="January" />
                                <f:selectItem itemValue="2" itemLabel="February" />
                                <f:selectItem itemValue="3" itemLabel="March" />
                                <f:selectItem itemValue="4" itemLabel="April" />
                                <f:selectItem itemValue="5" itemLabel="May" />
                                <f:selectItem itemValue="6" itemLabel="June" />
                                <f:selectItem itemValue="7" itemLabel="July" />
                                <f:selectItem itemValue="8" itemLabel="August" />
                                <f:selectItem itemValue="9" itemLabel="September" />
                                <f:selectItem itemValue="10" itemLabel="October" />
                                <f:selectItem itemValue="11" itemLabel="November" />
                                <f:selectItem itemValue="12" itemLabel="December" />
                            </h:selectOneMenu>
                            <h:inputText value="#{educationManagedBean.endYear}" pt:placeholder="Year" />
                            <h:inputTextarea value="#{educationManagedBean.description}" pt:placeholder="Description" />
                        </p><p>
                            <h:commandButton action="#{educationManagedBean.addEducation()}" value="Add it !" />
                        </p>
                    </h:form>
                </div>
            </c:if>


            <ui:repeat var="education" value="#{profileBean.user.educationList}">
                <div class="education">
                    #{education.title} 
                    #{education.schoolName}
                </div>
            </ui:repeat>
        </c:if>

        <c:if test="#{profileBean.canSeeSection('Skills')}">
            <h2>Skills</h2>
            <c:if test="#{profileBean.isOwnProfile()}">
                <button value="+" name="+" onclick="switchVisibility(addSkills)" />
            </c:if>

            <c:if test="#{profileBean.isOwnProfile()}">
                <div id="add-skills" hidden="true">
                    <h:form>
                        <h:inputText pt:placeholder="Skill" required="true" requiredMessage="Enter a skill" />
                    </h:form>
                </div>     
            </c:if>
        </c:if>

        <c:if test="#{profileBean.canSeeSection('Languages')}">
            <h2>Languages</h2>
            <c:if test="#{profileBean.isOwnProfile()}">
                <button value="+" name="+" onclick="switchVisibility(addLanguages)" />
            </c:if>

            <c:if test="#{profileBean.isOwnProfile()}">
                <div id="add-languages" hidden="true">
                    <h:form>
                        <h:inputText pt:placeholder="Language" required="true" requiredMessage="Enter a language" />
                        <h:selectOneMenu required="true" requiredMessage="Select your proficiency" >
                            <f:selectItem itemValue="1" itemLabel="Beginner" />
                            <f:selectItem itemValue="2" itemLabel="Conversational" />
                            <f:selectItem itemValue="3" itemLabel="Business" />
                            <f:selectItem itemValue="4" itemLabel="Fluent" />
                            <f:selectItem itemValue="5" itemLabel="Native" />
                        </h:selectOneMenu>
                    </h:form>
                </div>
            </c:if>
        </c:if>
    </body>
</html>