<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" >

    <h:head>
        <title>Profile | Online CV</title>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="css/style.css"/>
        <script src="js/profile.js" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
    </h:head>
    <body>
        <f:metadata>
            <f:viewParam name="id" value="#{profileBean.userId}" />
            <f:viewAction action="#{profileBean.onload}" />
        </f:metadata>

        <ui:include src="/WEB-INF/include/header.xhtml"/>

        <nav id="nav-resume">
            <button id="resume-button" class="nav-button" onclick="displayResume();" ><i class="fa fa-home fa-2x"></i></button>
            <button id="connections-button" class="nav-button" onclick="displayConnections();" ><i class="fa fa-users fa-2x"></i></button>
            <c:if test="#{profileBean.isOwnProfile()}" >
                <button id="requests-button" class="nav-button" onclick="displayRequests();" ><i class="fa fa-inbox fa-2x"></i></button>
            </c:if>
        </nav>

        <div id="resume">
            <div id="user-infos">
                <h1>#{profileBean.user.firstName} #{profileBean.user.lastName} 
                    <c:if test="#{profileBean.canSeeConnectionButton()}">
                        <h:form>
                            <h:commandLink value="" actionListener="#{profileBean.addConnectionRequest()}">
                                <i class="fa fa-user-plus"></i>
                            </h:commandLink>
                        </h:form>
                    </c:if>
                </h1>

                <div id="desc-field">
                    <c:choose>
                        <c:when test="#{not empty profileBean.user.description}">
                            <i class="fa fa-quote-left"></i> #{profileBean.user.description} <i class="fa fa-quote-right"></i>
                        </c:when>
                        <c:otherwise>
                            <c:if test="#{profileBean.isOwnProfile()}">
                                No description set
                            </c:if>
                        </c:otherwise>
                    </c:choose>
                    <c:if test="#{profileBean.isOwnProfile()}">
                        <button onclick="switchVisibility(description, descriptionEdit);" ><i class="fa fa-pencil-square-o"></i></button>
                    </c:if>
                </div>
                <c:if test="#{profileBean.isOwnProfile()}">
                    <div id='description-edit' hidden="true">
                        <h:form>
                            <div class="input-group">
                                <h:inputText class="form-control" pt:placeholder="Description" value="#{profileBean.user.description}" />
                                <div class="input-group-btn">
                                    <h:commandButton class="btn btn-default" value="Save" action="#{profileBean.updateProfile()}" />
                                    <h:commandButton class="btn btn-default" value="Cancel" action="#{profileBean.onload()}" />  
                                </div>
                            </div>
                        </h:form>
                    </div>
                </c:if>

                <div id="personal-infos">
                    <div id="address">
                        <c:choose>
                            <c:when test="#{not empty profileBean.user.address}">
                                <i class="fa fa-home"></i> : #{profileBean.user.address}
                            </c:when>
                            <c:otherwise>
                                <c:if test="#{profileBean.isOwnProfile()}">
                                    <i class="fa fa-home"></i> : No address set
                                </c:if>
                            </c:otherwise>
                        </c:choose>
                        <c:if test="#{profileBean.isOwnProfile()}">
                            <button onclick="switchVisibility(address, addressEdit);" ><i class="fa fa-pencil-square-o"></i></button>
                        </c:if>
                    </div>
                    <c:if test="#{profileBean.isOwnProfile()}">
                        <div id='address-edit' hidden="true">
                            <h:form>
                                <div class="input-group">
                                    <h:inputText class="form-control" pt:placeholder="Address" value="#{profileBean.user.address}" />
                                    <div class="input-group-btn">
                                        <h:commandButton class="btn btn-default" value="Save" action="#{profileBean.updateProfile()}" />
                                        <h:commandButton class="btn btn-default" value="Cancel" action="#{profileBean.onload()}" />
                                    </div>
                                </div>
                            </h:form>
                        </div>
                    </c:if>

                    <div id="telephone">
                        <c:choose>
                            <c:when test="#{not empty profileBean.user.telephoneNumber}">
                                <i class="fa fa-phone"></i> : #{profileBean.user.telephoneNumber}
                            </c:when>
                            <c:otherwise>
                                <c:if test="#{profileBean.isOwnProfile()}">
                                    <i class="fa fa-phone"></i> : No telephone number set
                                </c:if>
                            </c:otherwise>
                        </c:choose>
                        <c:if test="#{profileBean.isOwnProfile()}">
                            <button onclick="switchVisibility(telephone, telephoneEdit);" ><i class="fa fa-pencil-square-o"></i></button>
                        </c:if>
                    </div>
                    <c:if test="#{profileBean.isOwnProfile()}">
                        <div id='telephone-edit' hidden="true">
                            <h:form>
                                <div class="input-group">
                                    <h:inputText class="form-control" pt:placeholder="Phone number" value="#{profileBean.user.telephoneNumber}" />
                                    <div class="input-group-btn">
                                        <h:commandButton class="btn btn-default" value="Save" action="#{profileBean.updateProfile()}" />
                                        <h:commandButton class="btn btn-default" value="Cancel" action="#{profileBean.onload()}" />
                                    </div>
                                </div>
                            </h:form>
                        </div>
                    </c:if>

                    <div id="gender">
                        <c:choose>
                            <c:when test="#{not empty profileBean.user.gender}">
                                <i class="fa fa-venus-mars"></i> : 
                                <script>
                                    document.write(genderToString(#{profileBean.user.gender}));
                                </script>
                            </c:when>
                            <c:otherwise>
                                <c:if test="#{profileBean.isOwnProfile()}">
                                    <i class="fa fa-venus-mars"></i> : No gender set
                                </c:if>
                            </c:otherwise>
                        </c:choose>
                        <c:if test="#{profileBean.isOwnProfile()}">
                            <button onclick="switchVisibility(gender, genderEdit);" ><i class="fa fa-pencil-square-o"></i></button>
                        </c:if>
                    </div>
                    <c:if test="#{profileBean.isOwnProfile()}">
                        <div id='gender-edit' hidden="true">
                            <h:form>
                                <div class="input-group">
                                    <h:selectOneMenu class="form-control" value="#{profileBean.user.gender}" >
                                        <f:selectItem itemLabel="No selection" />
                                        <f:selectItem itemValue="true" itemLabel="Male" />
                                        <f:selectItem itemValue="false" itemLabel="Female" />
                                    </h:selectOneMenu>
                                    <div class="input-group-btn">
                                        <h:commandButton class="btn btn-default" value="Save" action="#{profileBean.updateProfile()}" />
                                        <h:commandButton class="btn btn-default" value="Cancel" action="#{profileBean.onload()}" />
                                    </div>
                                </div>
                            </h:form>
                        </div>
                    </c:if>
                </div>
            </div>

            <c:if test="#{profileBean.canSeeSection('Experience')}">
                <section id="experience">
                    <h2><i class="fa fa-briefcase"></i> Work Experience</h2>
                    <c:if test="#{profileBean.isOwnProfile()}">
                        <h:form>
                            <div class="input-group">
                                <h:selectOneMenu class="form-control" value="#{profileBean.user.experiencesPrivacy}" >
                                    <f:selectItem itemValue="0" itemLabel="Public" />
                                    <f:selectItem itemValue="1" itemLabel="Users" />
                                    <f:selectItem itemValue="2" itemLabel="Connections" />
                                    <f:selectItem itemValue="3" itemLabel="Private" />
                                </h:selectOneMenu>
                                <span class="input-group-btn">
                                    <h:commandButton class="btn btn-default" value="Update privacy" action="#{profileBean.updateProfile()}" />
                                </span>
                            </div>
                        </h:form>
                        <button onclick="switchVisibility(addWork)"><i class="fa fa-plus"></i></button>
                    </c:if>

                    <c:if test="#{profileBean.isOwnProfile()}">
                        <div id="add-work" hidden="true">
                            <h:form class="form-horizontal">
                                <div class="form-group">
                                    <h:inputText class="form-control" value="#{experienceManagedBean.title}" pt:placeholder="Title" required="true" requiredMessage="Enter a title" />
                                </div>
                                <div class="form-group">
                                    <h:inputText class="form-control" value="#{experienceManagedBean.company}" pt:placeholder="Company" required="true" requiredMessage="Enter a valid company name" />
                                </div>
                                <div class="form-group">
                                    <h:inputText class="form-control" value="#{experienceManagedBean.location}" pt:placeholder="Location" />
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-1">
                                        From
                                    </div>
                                    <div class="col-sm-3">
                                        <h:selectOneMenu class="form-control" value="#{experienceManagedBean.startMonth}" >
                                            <f:selectItem itemLabel="Month" />
                                            <f:selectItem itemValue="1" itemLabel="January" />
                                            <f:selectItem itemValue="2" itemLabel="February" />
                                            <f:selectItem itemValue="3" itemLabel="March" />
                                            <f:selectItem itemValue="4" itemLabel="April" />
                                            <f:selectItem itemValue="5" itemLabel="May" />
                                            <f:selectItem itemValue="6" itemLabel="June" />
                                            <f:selectItem itemValue="7" itemLabel="July" />
                                            <f:selectItem itemValue="8" itemLabel="August" />
                                            <f:selectItem itemValue="9" itemLabel="September" />
                                            <f:selectItem itemValue="10" itemLabel="October" />
                                            <f:selectItem itemValue="11" itemLabel="November" />
                                            <f:selectItem itemValue="12" itemLabel="December" />
                                        </h:selectOneMenu>
                                    </div>
                                    <div class="col-sm-2">
                                        <h:inputText pt:type="number" pt:min="1900" pt:max="2100" class="form-control" value="#{experienceManagedBean.startYear}" pt:placeholder="Year" />
                                    </div>
                                    <div class="col-sm-1">
                                        To
                                    </div>
                                    <div class="col-sm-3">
                                        <h:selectOneMenu class="form-control" value="#{experienceManagedBean.endMonth}" >
                                            <f:selectItem itemLabel="Month" />
                                            <f:selectItem itemValue="1" itemLabel="January" />
                                            <f:selectItem itemValue="2" itemLabel="February" />
                                            <f:selectItem itemValue="3" itemLabel="March" />
                                            <f:selectItem itemValue="4" itemLabel="April" />
                                            <f:selectItem itemValue="5" itemLabel="May" />
                                            <f:selectItem itemValue="6" itemLabel="June" />
                                            <f:selectItem itemValue="7" itemLabel="July" />
                                            <f:selectItem itemValue="8" itemLabel="August" />
                                            <f:selectItem itemValue="9" itemLabel="September" />
                                            <f:selectItem itemValue="10" itemLabel="October" />
                                            <f:selectItem itemValue="11" itemLabel="November" />
                                            <f:selectItem itemValue="12" itemLabel="December" />
                                        </h:selectOneMenu>
                                    </div>
                                    <div class="col-sm-2">
                                        <h:inputText pt:type="number" pt:min="1900" pt:max="2100" class="form-control" value="#{experienceManagedBean.endYear}" pt:placeholder="Year" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-8 col-sm-4">
                                        <h:selectBooleanCheckbox class="checkbox-inline" value="#{experienceManagedBean.isCurrent}">Currently working here ? </h:selectBooleanCheckbox>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <h:inputTextarea class="form-control" value="#{experienceManagedBean.description}" pt:placeholder="Description" />
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-10 col-sm-2">
                                        <h:commandButton class="btn btn-default" action="#{experienceManagedBean.addExperience()}" value="Add it !" />
                                    </div>
                                </div>
                            </h:form>
                        </div>
                    </c:if>

                    <c:forEach var="experience" items="#{profileBean.user.experienceList}">
                        <div id="experience-#{experience.experienceId}" class="experience" style="margin: 5px; padding: 5px; border: 1px solid black;">
                            #{experience.title} <br/>
                            #{experience.companyName} <br/>
                            <script>
                                document.write(monthIdToString(#{experience.startMonth}));
                            </script>
                            #{experience.startYear} - 
                            <c:choose>
                                <c:when test="#{experience.isCurrent}">
                                    Now <br/>
                                </c:when>
                                <c:otherwise>
                                    <script>
                                        document.write(monthIdToString(#{experience.endMonth}));
                                    </script>
                                    #{experience.endYear} <br/>
                                </c:otherwise>
                            </c:choose>
                            #{experience.location} <br/>
                            #{experience.description} <br/>
                            <c:if test="#{profileBean.isOwnProfile()}" >
                                <button onclick="switchVisibility(document.getElementById('experience-' + #{experience.experienceId}), document.getElementById('experience-' + #{experience.experienceId} + '-edit'));" ><i class="fa fa-pencil-square-o"></i></button>
                                <h:form>
                                    <h:commandLink action="#{experienceManagedBean.removeExperience(experience)}" value="" >
                                        <i class="fa fa-times"></i>
                                    </h:commandLink>
                                </h:form>
                            </c:if>
                        </div>
                        <c:if test="#{profileBean.isOwnProfile()}" >
                            <div id="experience-#{experience.experienceId}-edit" class="experience" style="margin: 5px; padding: 5px; border: 1px solid black;" hidden="true">
                                <h:form class="form-horizontal">
                                    <div class="form-group">
                                        <h:inputText class="form-control" value="#{experience.title}" pt:placeholder="Title" required="true" requiredMessage="Enter a title" />
                                    </div>
                                    <div class="form-group">
                                        <h:inputText class="form-control" value="#{experience.companyName}" pt:placeholder="Company" required="true" requiredMessage="Enter a valid company name" />
                                    </div>
                                    <div class="form-group">
                                        <h:inputText class="form-control" value="#{experience.location}" pt:placeholder="Location" />
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-1">
                                            From
                                        </div>
                                        <div class="col-sm-3">
                                            <h:selectOneMenu class="form-control" value="#{experience.startMonth}" >
                                                <f:selectItem itemLabel="Month" />
                                                <f:selectItem itemValue="1" itemLabel="January" />
                                                <f:selectItem itemValue="2" itemLabel="February" />
                                                <f:selectItem itemValue="3" itemLabel="March" />
                                                <f:selectItem itemValue="4" itemLabel="April" />
                                                <f:selectItem itemValue="5" itemLabel="May" />
                                                <f:selectItem itemValue="6" itemLabel="June" />
                                                <f:selectItem itemValue="7" itemLabel="July" />
                                                <f:selectItem itemValue="8" itemLabel="August" />
                                                <f:selectItem itemValue="9" itemLabel="September" />
                                                <f:selectItem itemValue="10" itemLabel="October" />
                                                <f:selectItem itemValue="11" itemLabel="November" />
                                                <f:selectItem itemValue="12" itemLabel="December" />
                                            </h:selectOneMenu>
                                        </div>
                                        <div class="col-sm-2">
                                            <h:inputText pt:type="number" pt:min="1900" pt:max="2100" class="form-control" value="#{experience.startYear}" pt:placeholder="Year" />
                                        </div>
                                        <div class="col-sm-1">
                                            To
                                        </div>
                                        <div class="col-sm-3">
                                            <h:selectOneMenu class="form-control" value="#{experience.endMonth}" >
                                                <f:selectItem itemLabel="Month" />
                                                <f:selectItem itemValue="1" itemLabel="January" />
                                                <f:selectItem itemValue="2" itemLabel="February" />
                                                <f:selectItem itemValue="3" itemLabel="March" />
                                                <f:selectItem itemValue="4" itemLabel="April" />
                                                <f:selectItem itemValue="5" itemLabel="May" />
                                                <f:selectItem itemValue="6" itemLabel="June" />
                                                <f:selectItem itemValue="7" itemLabel="July" />
                                                <f:selectItem itemValue="8" itemLabel="August" />
                                                <f:selectItem itemValue="9" itemLabel="September" />
                                                <f:selectItem itemValue="10" itemLabel="October" />
                                                <f:selectItem itemValue="11" itemLabel="November" />
                                                <f:selectItem itemValue="12" itemLabel="December" />
                                            </h:selectOneMenu>
                                        </div>
                                        <div class="col-sm-2">
                                            <h:inputText pt:type="number" pt:min="1900" pt:max="2100" class="form-control" value="#{experience.endYear}" pt:placeholder="Year" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-offset-8 col-sm-4">
                                            <h:selectBooleanCheckbox class="checkbox-inline" value="#{experience.isCurrent}">Currently working here ? </h:selectBooleanCheckbox>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <h:inputTextarea class="form-control" value="#{experience.description}" pt:placeholder="Description" />
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-offset-8 col-sm-2 col-xs-6">
                                            <h:commandButton class="btn btn-default" action="#{experienceManagedBean.updateExperience(experience)}" value="Save" />
                                        </div>
                                        <div class="col-sm-2 col-xs-6">
                                            <h:commandButton class="btn btn-default" action="#{profileBean.onload()}" value="Cancel" />
                                        </div>
                                    </div>
                                </h:form>
                            </div>
                        </c:if>
                    </c:forEach>
                </section>
            </c:if>

            <c:if test="#{profileBean.canSeeSection('Education')}">
                <section id="education">
                    <h2><i class="fa fa-graduation-cap"></i> Education</h2>
                    <c:if test="#{profileBean.isOwnProfile()}">
                        <h:form>
                            <div class="input-group">
                                <h:selectOneMenu class="form-control" value="#{profileBean.user.educationPrivacy}" >
                                    <f:selectItem itemValue="0" itemLabel="Public" />
                                    <f:selectItem itemValue="1" itemLabel="Users" />
                                    <f:selectItem itemValue="2" itemLabel="Connections" />
                                    <f:selectItem itemValue="3" itemLabel="Private" />
                                </h:selectOneMenu>
                                <span class="input-group-btn">
                                    <h:commandButton class="btn btn-default" value="Update privacy" action="#{profileBean.updateProfile()}" />
                                </span> 
                            </div>
                        </h:form>
                        <button onclick="switchVisibility(addEducation)"><i class="fa fa-plus"></i></button>
                    </c:if>

                    <c:if test="#{profileBean.isOwnProfile()}">
                        <div id="add-education" hidden="true">
                            <h:form class="form-horizontal">
                                <div class="form-group">
                                    <h:inputText class="form-control" value="#{educationManagedBean.title}" pt:placeholder="Title" required="true" requiredMessage="Enter a title" />
                                </div>
                                <div class="form-group">
                                    <h:inputText class="form-control" value="#{educationManagedBean.school}" pt:placeholder="School" required="true" requiredMessage="Enter a valid school name" />
                                </div>
                                <div class="form-group">
                                    <h:inputText class="form-control" value="#{educationManagedBean.location}" pt:placeholder="Location" />
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-1">
                                        From
                                    </div>
                                    <div class="col-sm-3">
                                        <h:selectOneMenu class="form-control" value="#{educationManagedBean.startMonth}">
                                            <f:selectItem itemLabel="Month" />
                                            <f:selectItem itemValue="1" itemLabel="January" />
                                            <f:selectItem itemValue="2" itemLabel="February" />
                                            <f:selectItem itemValue="3" itemLabel="March" />
                                            <f:selectItem itemValue="4" itemLabel="April" />
                                            <f:selectItem itemValue="5" itemLabel="May" />
                                            <f:selectItem itemValue="6" itemLabel="June" />
                                            <f:selectItem itemValue="7" itemLabel="July" />
                                            <f:selectItem itemValue="8" itemLabel="August" />
                                            <f:selectItem itemValue="9" itemLabel="September" />
                                            <f:selectItem itemValue="10" itemLabel="October" />
                                            <f:selectItem itemValue="11" itemLabel="November" />
                                            <f:selectItem itemValue="12" itemLabel="December" />
                                        </h:selectOneMenu>
                                    </div>
                                    <div class="col-sm-2" style="text-align:center;">
                                        <h:inputText pt:type="number" pt:min="1900" pt:max="2100" class="form-control" value="#{educationManagedBean.startYear}" pt:placeholder="Year" />
                                    </div>
                                    <div class="col-sm-1">
                                        To
                                    </div>
                                    <div class="col-sm-3">
                                        <h:selectOneMenu class="form-control" value="#{educationManagedBean.endMonth}" >
                                            <f:selectItem itemLabel="Month" />
                                            <f:selectItem itemValue="1" itemLabel="January" />
                                            <f:selectItem itemValue="2" itemLabel="February" />
                                            <f:selectItem itemValue="3" itemLabel="March" />
                                            <f:selectItem itemValue="4" itemLabel="April" />
                                            <f:selectItem itemValue="5" itemLabel="May" />
                                            <f:selectItem itemValue="6" itemLabel="June" />
                                            <f:selectItem itemValue="7" itemLabel="July" />
                                            <f:selectItem itemValue="8" itemLabel="August" />
                                            <f:selectItem itemValue="9" itemLabel="September" />
                                            <f:selectItem itemValue="10" itemLabel="October" />
                                            <f:selectItem itemValue="11" itemLabel="November" />
                                            <f:selectItem itemValue="12" itemLabel="December" />
                                        </h:selectOneMenu>
                                    </div>
                                    <div class="col-sm-2">
                                        <h:inputText pt:type="number" pt:min="1900" pt:max="2100" class="form-control" value="#{educationManagedBean.endYear}" pt:placeholder="Year" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-8 col-sm-4">
                                        <h:selectBooleanCheckbox class="checkbox-inline" value="#{educationManagedBean.isCurrent}">Currently studying here ? </h:selectBooleanCheckbox>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <h:inputTextarea class="form-control" value="#{educationManagedBean.description}" pt:placeholder="Description" />
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-10 col-sm-2">
                                        <h:commandButton class="btn btn-default" action="#{educationManagedBean.addEducation()}" value="Add it !" />
                                    </div>
                                </div>
                            </h:form>
                        </div>
                    </c:if>


                    <c:forEach var="education" items="#{profileBean.user.educationList}">
                        <div id="education-#{education.educationId}" class="education" style="margin: 5px; padding: 5px; border: 1px solid black;">
                            #{education.title} <br/>
                            #{education.schoolName} <br/>
                            <script>
                                document.write(monthIdToString(#{education.startMonth}));
                            </script>
                            #{education.startYear} - 
                            <c:choose>
                                <c:when test="#{education.isCurrent}">
                                    Now <br/>
                                </c:when>
                                <c:otherwise>
                                    <script>
                                        document.write(monthIdToString(#{education.endMonth}));
                                    </script>
                                    #{education.endYear} <br/>
                                </c:otherwise>
                            </c:choose>
                            #{education.location} <br/>
                            #{education.description} <br/>
                            <c:if test="#{profileBean.isOwnProfile()}" >
                                <button onclick="switchVisibility(document.getElementById('education-' + #{education.educationId}), document.getElementById('education-' + #{education.educationId} + '-edit'));" ><i class="fa fa-pencil-square-o"></i></button>
                                <h:form>
                                    <h:commandLink action="#{educationManagedBean.removeEducation(education)}" value="" >
                                        <i class="fa fa-times"></i>
                                    </h:commandLink>
                                </h:form>
                            </c:if>
                        </div>
                        <c:if test="#{profileBean.isOwnProfile()}" >
                            <div id="education-#{education.educationId}-edit" class="education" style="margin: 5px; padding: 5px; border: 1px solid black;" hidden="true">
                                <h:form class="form-horizontal">
                                    <div class="form-group">
                                        <h:inputText class="form-control" value="#{education.title}" pt:placeholder="Title" required="true" requiredMessage="Enter a title" />
                                    </div>
                                    <div class="form-group">
                                        <h:inputText class="form-control" value="#{education.schoolName}" pt:placeholder="School" required="true" requiredMessage="Enter a valid school name" />
                                    </div>
                                    <div class="form-group">
                                        <h:inputText class="form-control" value="#{education.location}" pt:placeholder="Location" />
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-1">
                                            From
                                        </div>
                                        <div class="col-sm-3">
                                            <h:selectOneMenu class="form-control" value="#{education.startMonth}">
                                                <f:selectItem itemLabel="Month" />
                                                <f:selectItem itemValue="1" itemLabel="January" />
                                                <f:selectItem itemValue="2" itemLabel="February" />
                                                <f:selectItem itemValue="3" itemLabel="March" />
                                                <f:selectItem itemValue="4" itemLabel="April" />
                                                <f:selectItem itemValue="5" itemLabel="May" />
                                                <f:selectItem itemValue="6" itemLabel="June" />
                                                <f:selectItem itemValue="7" itemLabel="July" />
                                                <f:selectItem itemValue="8" itemLabel="August" />
                                                <f:selectItem itemValue="9" itemLabel="September" />
                                                <f:selectItem itemValue="10" itemLabel="October" />
                                                <f:selectItem itemValue="11" itemLabel="November" />
                                                <f:selectItem itemValue="12" itemLabel="December" />
                                            </h:selectOneMenu>
                                        </div>
                                        <div class="col-sm-2">
                                            <h:inputText pt:type="number" pt:min="1900" pt:max="2100" class="form-control" value="#{education.startYear}" pt:placeholder="Year" />
                                        </div>
                                        <div class="col-sm-1">
                                            To
                                        </div>
                                        <div class="col-sm-3">
                                            <h:selectOneMenu class="form-control" value="#{education.endMonth}" >
                                                <f:selectItem itemLabel="Month" />
                                                <f:selectItem itemValue="1" itemLabel="January" />
                                                <f:selectItem itemValue="2" itemLabel="February" />
                                                <f:selectItem itemValue="3" itemLabel="March" />
                                                <f:selectItem itemValue="4" itemLabel="April" />
                                                <f:selectItem itemValue="5" itemLabel="May" />
                                                <f:selectItem itemValue="6" itemLabel="June" />
                                                <f:selectItem itemValue="7" itemLabel="July" />
                                                <f:selectItem itemValue="8" itemLabel="August" />
                                                <f:selectItem itemValue="9" itemLabel="September" />
                                                <f:selectItem itemValue="10" itemLabel="October" />
                                                <f:selectItem itemValue="11" itemLabel="November" />
                                                <f:selectItem itemValue="12" itemLabel="December" />
                                            </h:selectOneMenu>
                                        </div>
                                        <div class="col-sm-2">
                                            <h:inputText pt:type="number" pt:min="1900" pt:max="2100" class="form-control" value="#{education.endYear}" pt:placeholder="Year" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-offset-8 col-sm-4">
                                            <h:selectBooleanCheckbox class="checkbox-inline" value="#{education.isCurrent}" >Currently studying here ? </h:selectBooleanCheckbox>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <h:inputTextarea class="form-control" value="#{education.description}" pt:placeholder="Description" />
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-offset-8 col-sm-2 col-xs-6">
                                            <h:commandButton class="btn btn-default" action="#{educationManagedBean.updateEducation(education)}" value="Save" />
                                        </div>
                                        <div class="col-sm-2 col-xs-6">
                                            <h:commandButton class="btn btn-default" action="#{profileBean.onload()}" value="Cancel" />
                                        </div>
                                    </div>
                                </h:form>
                            </div>
                        </c:if>
                    </c:forEach>
                </section>
            </c:if>

            <c:if test="#{profileBean.canSeeSection('Skills')}">
                <section id="skills">
                    <h2><i class="fa fa-trophy"></i> Skills</h2>
                    <c:if test="#{profileBean.isOwnProfile()}">
                        <h:form>
                            <div class="input-group">
                                <h:selectOneMenu class="form-control" value="#{profileBean.user.skillsPrivacy}" >
                                    <f:selectItem itemValue="0" itemLabel="Public" />
                                    <f:selectItem itemValue="1" itemLabel="Users" />
                                    <f:selectItem itemValue="2" itemLabel="Connections" />
                                    <f:selectItem itemValue="3" itemLabel="Private" />
                                </h:selectOneMenu>
                                <span class="input-group-btn">
                                    <h:commandButton class="btn btn-default" value="Update privacy" action="#{profileBean.updateProfile()}" />
                                </span>
                            </div>
                        </h:form>
                        <button onclick="switchVisibility(addSkills)"><i class="fa fa-plus"></i></button>
                    </c:if>

                    <c:if test="#{profileBean.isOwnProfile()}">
                        <div id="add-skills" hidden="true">
                            <h:form>
                                <div class="input-group">
                                    <h:inputText class="form-control" value="#{skillManagedBean.label}" pt:placeholder="Skill" required="true" requiredMessage="Enter a skill" />
                                    <span class="input-group-btn">
                                        <h:commandButton class="btn btn-default" action="#{skillManagedBean.addSkill()}" value="Add it !" />
                                    </span>
                                </div>

                            </h:form>
                        </div>
                    </c:if>

                    <ui:repeat var="skill" value="#{profileBean.user.skillList}">
                        <div class="skill" style="margin: 5px; padding: 5px; border: 1px solid black;">
                            #{skill.label}
                            <c:if test="#{profileBean.isOwnProfile()}" >
                                <h:form>
                                    <h:commandLink action="#{skillManagedBean.removeSkill(skill)}" value="" >
                                        <i class="fa fa-times"></i>
                                    </h:commandLink>
                                </h:form>
                            </c:if>
                        </div>
                    </ui:repeat>
                </section>
            </c:if>

            <c:if test="#{profileBean.canSeeSection('Languages')}">
                <section id="languages">
                    <h2><i class="fa fa-globe"></i> Languages</h2>
                    <c:if test="#{profileBean.isOwnProfile()}">
                        <h:form>
                            <div class="input-group">
                                <h:selectOneMenu class="form-control" value="#{profileBean.user.languagesPrivacy}" >
                                    <f:selectItem itemValue="0" itemLabel="Public" />
                                    <f:selectItem itemValue="1" itemLabel="Users" />
                                    <f:selectItem itemValue="2" itemLabel="Connections" />
                                    <f:selectItem itemValue="3" itemLabel="Private" />
                                </h:selectOneMenu>
                                <span class="input-group-btn">
                                    <h:commandButton class="btn btn-default" value="Update privacy" action="#{profileBean.updateProfile()}" />
                                </span>
                            </div>
                        </h:form>
                        <button onclick="switchVisibility(addLanguages)"><i class="fa fa-plus"></i></button>
                    </c:if>

                    <c:if test="#{profileBean.isOwnProfile()}">
                        <div id="add-languages" hidden="true">
                            <h:form class="form-horizontal">
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <h:inputText class="form-control" value="#{languageManagedBean.label}" pt:placeholder="Language" required="true" requiredMessage="Enter a language" />
                                    </div>
                                    <div class="col-sm-4">
                                        <h:selectOneMenu class="form-control" value="#{languageManagedBean.proficiency}" required="true" requiredMessage="Select your proficiency" >
                                            <f:selectItem itemValue="1" itemLabel="Beginner" />
                                            <f:selectItem itemValue="2" itemLabel="Conversational" />
                                            <f:selectItem itemValue="3" itemLabel="Business" />
                                            <f:selectItem itemValue="4" itemLabel="Fluent" />
                                            <f:selectItem itemValue="5" itemLabel="Native" />
                                        </h:selectOneMenu>
                                    </div>
                                    <div class="col-sm-2">
                                        <h:commandButton class="btn btn-default" action="#{languageManagedBean.addLanguage()}" value="Add it !" />
                                    </div>
                                </div>
                            </h:form>
                        </div>
                    </c:if>

                    <c:forEach var="speaks" items="#{profileBean.user.speaksList}">
                        <div id="speaks-#{speaks.speaksPK.languageId}" class="speaks" style="margin: 5px; padding: 5px; border: 1px solid black;">
                            #{speaks.language.label}
                            <script>
                                document.write(proficiencyIdToString(#{speaks.proficiency}));
                            </script>
                            <c:if test="#{profileBean.isOwnProfile()}" >
                                <button onclick="switchVisibility(document.getElementById('speaks-' +#{speaks.speaksPK.languageId}), document.getElementById('speaks-' +#{speaks.speaksPK.languageId} + '-edit'));" ><i class="fa fa-pencil-square-o"></i></button>
                                <h:form>
                                    <h:commandLink action="#{languageManagedBean.removeLanguage(speaks)}" value="" >
                                        <i class="fa fa-times"></i>
                                    </h:commandLink>
                                </h:form>
                            </c:if>
                        </div>
                        <c:if test="#{profileBean.isOwnProfile()}">
                            <div id="speaks-#{speaks.speaksPK.languageId}-edit" style="margin: 5px; padding: 5px; border: 1px solid black;" hidden="true" >
                                <h:form>
                                    <div class="form-group">
                                        <div class="col-sm-12">
                                            #{speaks.language.label}
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-12">
                                            <h:selectOneMenu class="form-control" value="#{speaks.proficiency}" required="true" requiredMessage="Select your proficiency" >
                                                <f:selectItem itemValue="1" itemLabel="Beginner" />
                                                <f:selectItem itemValue="2" itemLabel="Conversational" />
                                                <f:selectItem itemValue="3" itemLabel="Business" />
                                                <f:selectItem itemValue="4" itemLabel="Fluent" />
                                                <f:selectItem itemValue="5" itemLabel="Native" />
                                            </h:selectOneMenu>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-offset-8 col-sm-2 col-xs-6">
                                            <h:commandButton class="btn btn-default" action="#{languageManagedBean.updateSpeaks(speaks)}" value="Save" />
                                        </div>
                                        <div class="col-sm-2 col-xs-6">
                                            <h:commandButton class="btn btn-default" action="#{profileBean.onload()}" value="Cancel" />
                                        </div>
                                    </div>
                                </h:form>
                            </div>
                        </c:if>
                    </c:forEach>
                </section>
            </c:if>
        </div>

        <div id="connections" hidden="true">
            <h1>Connections</h1>
            <ui:repeat var="user" value="#{profileBean.user.getConnections()}">
                <div class="connection" style="margin: 5px; padding: 5px; border: 1px solid black;">
                    #{user.firstName}
                    #{user.lastName}
                    #{user.email}
                    <h:button class="submit" outcome="profile" value="View Profile">
                        <f:param name="id" value="#{user.userId}"/>
                    </h:button>
                </div>
            </ui:repeat>
        </div>

        <c:if test="#{profileBean.isOwnProfile()}" >
            <div id="requests" hidden="true">
                <h1>Connection Requests</h1>
                <ui:repeat var="user" value="#{profileBean.user.getWantsConnectionList()}">
                    <div class="request" style="margin: 5px; padding: 5px; border: 1px solid black;">
                        #{user.firstName}
                        #{user.lastName}
                        #{user.email}
                        <h:button class="submit" outcome="profile" value="View Profile">
                            <f:param name="id" value="#{user.userId}"/>
                        </h:button>
                        <h:form>
                            <h:commandButton action="#{profileBean.acceptRequest(user)}" value="Accept" />
                            <h:commandButton action="#{profileBean.deleteRequest(user)}" value="Decline" />
                        </h:form>
                    </div>
                </ui:repeat>
            </div>
        </c:if>
    </body>
</html>
